<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.49" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://vuepress-theme-hope-v2-demo.mrhope.site/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html"><meta property="og:site_name" content="HAHG的博客"><meta property="og:title" content="三、Spring与AOP"><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-09-27T14:47:05.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:modified_time" content="2022-09-27T14:47:05.000Z"><title>三、Spring与AOP | HAHG的博客</title><meta name="description" content="HAHG的博客">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.238aa185.css">
    <link rel="modulepreload" href="/assets/app.b534db7f.js"><link rel="modulepreload" href="/assets/三、Spring与AOP.html.7f7427e4.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/三、Spring与AOP.html.7f31f552.js"><link rel="prefetch" href="/assets/index.html.346ec84d.js"><link rel="prefetch" href="/assets/home.html.af0b42b8.js"><link rel="prefetch" href="/assets/slide.html.d94d7458.js"><link rel="prefetch" href="/assets/index.html.15aaf6a9.js"><link rel="prefetch" href="/assets/disable.html.ad2da56e.js"><link rel="prefetch" href="/assets/encrypt.html.e8167d0d.js"><link rel="prefetch" href="/assets/markdown.html.d1342671.js"><link rel="prefetch" href="/assets/page.html.302f33cd.js"><link rel="prefetch" href="/assets/article10.html.c7d33c2d.js"><link rel="prefetch" href="/assets/article11.html.66a8120d.js"><link rel="prefetch" href="/assets/article12.html.0890172e.js"><link rel="prefetch" href="/assets/article9.html.569e8b6b.js"><link rel="prefetch" href="/assets/index.html.b03214eb.js"><link rel="prefetch" href="/assets/看番时间轴.html.e7d70309.js"><link rel="prefetch" href="/assets/article1.html.31649056.js"><link rel="prefetch" href="/assets/article2.html.41454c5a.js"><link rel="prefetch" href="/assets/article3.html.2895fa17.js"><link rel="prefetch" href="/assets/article4.html.842d649a.js"><link rel="prefetch" href="/assets/article5.html.7d2ad58c.js"><link rel="prefetch" href="/assets/article6.html.3e7f8381.js"><link rel="prefetch" href="/assets/article7.html.4de14093.js"><link rel="prefetch" href="/assets/article8.html.7df39556.js"><link rel="prefetch" href="/assets/index.html.34347166.js"><link rel="prefetch" href="/assets/重学CSS-上.html.e220654b.js"><link rel="prefetch" href="/assets/重学CSS-中.html.eaa28cb4.js"><link rel="prefetch" href="/assets/重学HTML-上.html.3e911a2a.js"><link rel="prefetch" href="/assets/重学HTML-下.html.09d43aa9.js"><link rel="prefetch" href="/assets/错题一.html.8e53083b.js"><link rel="prefetch" href="/assets/面试题一.html.db7dcc4f.js"><link rel="prefetch" href="/assets/SQL速记.html.4913610b.js"><link rel="prefetch" href="/assets/index.html.ea568d41.js"><link rel="prefetch" href="/assets/算法一-6月24.html.b377e903.js"><link rel="prefetch" href="/assets/算法三-7月28.html.ee208324.js"><link rel="prefetch" href="/assets/算法二-7月11.html.11e6ad5d.js"><link rel="prefetch" href="/assets/算法五-8月28.html.6c1634f6.js"><link rel="prefetch" href="/assets/算法六.html.cea931c7.js"><link rel="prefetch" href="/assets/算法四-8月11-动态规划合集.html.b42f2576.js"><link rel="prefetch" href="/assets/Vue-上.html.51049602.js"><link rel="prefetch" href="/assets/Vue-下之源码分析.html.c2f3b68c.js"><link rel="prefetch" href="/assets/Vue-中之项目开发.html.b0a639c2.js"><link rel="prefetch" href="/assets/jQuery-上.html.532ad2be.js"><link rel="prefetch" href="/assets/jQuery-下.html.7564f605.js"><link rel="prefetch" href="/assets/jQuery-中.html.e6f28195.js"><link rel="prefetch" href="/assets/ES6-上.html.61e84b81.js"><link rel="prefetch" href="/assets/ES6-中.html.b67612ad.js"><link rel="prefetch" href="/assets/原生JS-下.html.bb893848.js"><link rel="prefetch" href="/assets/原生JS高级-上.html.042f0bba.js"><link rel="prefetch" href="/assets/原生JS高级-中.html.1e6b408c.js"><link rel="prefetch" href="/assets/Node-上之基本知识.html.7bc97bd3.js"><link rel="prefetch" href="/assets/Node-下之综合Web项目.html.a1a10071.js"><link rel="prefetch" href="/assets/Node-中之框架使用.html.cd679c6b.js"><link rel="prefetch" href="/assets/一、MyBatis入门.html.636bbef8.js"><link rel="prefetch" href="/assets/二、单表的 CURD 操作.html.1182253f.js"><link rel="prefetch" href="/assets/五、Mybatis注解式开发.html.4a8a532e.js"><link rel="prefetch" href="/assets/四、查询缓存.html.29a77d4a.js"><link rel="prefetch" href="/assets/一、SSM框架前言-系统架构.html.f9ef9e23.js"><link rel="prefetch" href="/assets/三、SSM框架前言-代理模式.html.4452f112.js"><link rel="prefetch" href="/assets/五、SSM框架前言-模板方法设计模式.html.7a456c19.js"><link rel="prefetch" href="/assets/六、JUnit测试.html.fcf16fa9.js"><link rel="prefetch" href="/assets/一、Spring概述.html.c6b5095b.js"><link rel="prefetch" href="/assets/二、Spring与IoC.html.86ed21cb.js"><link rel="prefetch" href="/assets/五、Spring与MyBatis.html.76dfbadd.js"><link rel="prefetch" href="/assets/六、Spring与Web.html.63d297c3.js"><link rel="prefetch" href="/assets/一、SpringMVC概述.html.ba0321ea.js"><link rel="prefetch" href="/assets/三、SpringMVC注解式开发.html.a4e3354f.js"><link rel="prefetch" href="/assets/二、SpringMVC配置式开发.html.618deb82.js"><link rel="prefetch" href="/assets/404.html.3b03194f.js"><link rel="prefetch" href="/assets/index.html.e7580870.js"><link rel="prefetch" href="/assets/index.html.e27c2ff6.js"><link rel="prefetch" href="/assets/index.html.4da17ae5.js"><link rel="prefetch" href="/assets/index.html.97809ab2.js"><link rel="prefetch" href="/assets/index.html.d7d6d26a.js"><link rel="prefetch" href="/assets/index.html.9b517635.js"><link rel="prefetch" href="/assets/index.html.aefa34ad.js"><link rel="prefetch" href="/assets/index.html.84aee3a0.js"><link rel="prefetch" href="/assets/index.html.9ab78519.js"><link rel="prefetch" href="/assets/index.html.78d43126.js"><link rel="prefetch" href="/assets/index.html.11cbecf7.js"><link rel="prefetch" href="/assets/index.html.f40f9542.js"><link rel="prefetch" href="/assets/index.html.74dcb681.js"><link rel="prefetch" href="/assets/index.html.f190703e.js"><link rel="prefetch" href="/assets/index.html.b673ee4d.js"><link rel="prefetch" href="/assets/index.html.fc88d930.js"><link rel="prefetch" href="/assets/index.html.c0fd209f.js"><link rel="prefetch" href="/assets/index.html.e0f64dbd.js"><link rel="prefetch" href="/assets/home.html.e5d0ce0d.js"><link rel="prefetch" href="/assets/slide.html.35e38897.js"><link rel="prefetch" href="/assets/index.html.1958ee9e.js"><link rel="prefetch" href="/assets/disable.html.253febb7.js"><link rel="prefetch" href="/assets/encrypt.html.62141e6d.js"><link rel="prefetch" href="/assets/markdown.html.d8fcf0ec.js"><link rel="prefetch" href="/assets/page.html.66e23716.js"><link rel="prefetch" href="/assets/article10.html.d286769a.js"><link rel="prefetch" href="/assets/article11.html.a50f0a67.js"><link rel="prefetch" href="/assets/article12.html.7431575b.js"><link rel="prefetch" href="/assets/article9.html.6ea85369.js"><link rel="prefetch" href="/assets/index.html.06cb62c9.js"><link rel="prefetch" href="/assets/看番时间轴.html.78ec7966.js"><link rel="prefetch" href="/assets/article1.html.bd0a3cb1.js"><link rel="prefetch" href="/assets/article2.html.20b68069.js"><link rel="prefetch" href="/assets/article3.html.694426fc.js"><link rel="prefetch" href="/assets/article4.html.725f798f.js"><link rel="prefetch" href="/assets/article5.html.425ee038.js"><link rel="prefetch" href="/assets/article6.html.611c2646.js"><link rel="prefetch" href="/assets/article7.html.d95c44fb.js"><link rel="prefetch" href="/assets/article8.html.a243220f.js"><link rel="prefetch" href="/assets/index.html.1ff6c4ea.js"><link rel="prefetch" href="/assets/重学CSS-上.html.8c9697ae.js"><link rel="prefetch" href="/assets/重学CSS-中.html.a8239afe.js"><link rel="prefetch" href="/assets/重学HTML-上.html.10c07af0.js"><link rel="prefetch" href="/assets/重学HTML-下.html.bffe0fe5.js"><link rel="prefetch" href="/assets/错题一.html.56960c48.js"><link rel="prefetch" href="/assets/面试题一.html.6b3b8b05.js"><link rel="prefetch" href="/assets/SQL速记.html.b428ced0.js"><link rel="prefetch" href="/assets/index.html.c00ea26f.js"><link rel="prefetch" href="/assets/算法一-6月24.html.c42d1868.js"><link rel="prefetch" href="/assets/算法三-7月28.html.d07b5f54.js"><link rel="prefetch" href="/assets/算法二-7月11.html.9a06cae8.js"><link rel="prefetch" href="/assets/算法五-8月28.html.10116194.js"><link rel="prefetch" href="/assets/算法六.html.f96895cf.js"><link rel="prefetch" href="/assets/算法四-8月11-动态规划合集.html.be34a68c.js"><link rel="prefetch" href="/assets/Vue-上.html.6cc4ee22.js"><link rel="prefetch" href="/assets/Vue-下之源码分析.html.4c4b3797.js"><link rel="prefetch" href="/assets/Vue-中之项目开发.html.9767b032.js"><link rel="prefetch" href="/assets/jQuery-上.html.b6a5481f.js"><link rel="prefetch" href="/assets/jQuery-下.html.bca84572.js"><link rel="prefetch" href="/assets/jQuery-中.html.8e9f9ff7.js"><link rel="prefetch" href="/assets/ES6-上.html.dc1a01f6.js"><link rel="prefetch" href="/assets/ES6-中.html.4480636d.js"><link rel="prefetch" href="/assets/原生JS-下.html.a6eece0c.js"><link rel="prefetch" href="/assets/原生JS高级-上.html.11d1f67b.js"><link rel="prefetch" href="/assets/原生JS高级-中.html.5760fd52.js"><link rel="prefetch" href="/assets/Node-上之基本知识.html.574142f1.js"><link rel="prefetch" href="/assets/Node-下之综合Web项目.html.41e2a041.js"><link rel="prefetch" href="/assets/Node-中之框架使用.html.a1742e05.js"><link rel="prefetch" href="/assets/一、MyBatis入门.html.8d8a2d99.js"><link rel="prefetch" href="/assets/二、单表的 CURD 操作.html.c97bc8b9.js"><link rel="prefetch" href="/assets/五、Mybatis注解式开发.html.d0f0925f.js"><link rel="prefetch" href="/assets/四、查询缓存.html.f68fd797.js"><link rel="prefetch" href="/assets/一、SSM框架前言-系统架构.html.9e601b91.js"><link rel="prefetch" href="/assets/三、SSM框架前言-代理模式.html.ac2a42bb.js"><link rel="prefetch" href="/assets/五、SSM框架前言-模板方法设计模式.html.c98a1bd0.js"><link rel="prefetch" href="/assets/六、JUnit测试.html.454f8371.js"><link rel="prefetch" href="/assets/一、Spring概述.html.91267623.js"><link rel="prefetch" href="/assets/二、Spring与IoC.html.de3c2ff8.js"><link rel="prefetch" href="/assets/五、Spring与MyBatis.html.cbd629d8.js"><link rel="prefetch" href="/assets/六、Spring与Web.html.cad1b7b3.js"><link rel="prefetch" href="/assets/一、SpringMVC概述.html.343bd595.js"><link rel="prefetch" href="/assets/三、SpringMVC注解式开发.html.8292fcac.js"><link rel="prefetch" href="/assets/二、SpringMVC配置式开发.html.3b47c44d.js"><link rel="prefetch" href="/assets/404.html.9afb7e84.js"><link rel="prefetch" href="/assets/index.html.e22590f2.js"><link rel="prefetch" href="/assets/index.html.dddc7245.js"><link rel="prefetch" href="/assets/index.html.b6c06cbe.js"><link rel="prefetch" href="/assets/index.html.4ded088a.js"><link rel="prefetch" href="/assets/index.html.befb7adc.js"><link rel="prefetch" href="/assets/index.html.0fd2e70a.js"><link rel="prefetch" href="/assets/index.html.80656daa.js"><link rel="prefetch" href="/assets/index.html.f969d1b3.js"><link rel="prefetch" href="/assets/index.html.d1ff6598.js"><link rel="prefetch" href="/assets/index.html.6b2644ae.js"><link rel="prefetch" href="/assets/index.html.b45a684d.js"><link rel="prefetch" href="/assets/index.html.e2055fd6.js"><link rel="prefetch" href="/assets/index.html.15a59d6a.js"><link rel="prefetch" href="/assets/index.html.75d99cbf.js"><link rel="prefetch" href="/assets/index.html.06c06fda.js"><link rel="prefetch" href="/assets/index.html.df2a1c0e.js"><link rel="prefetch" href="/assets/index.html.01042b11.js"><link rel="prefetch" href="/assets/404.29e4bd86.js"><link rel="prefetch" href="/assets/Layout.f0f26d6a.js"><link rel="prefetch" href="/assets/Slide.59a3afb7.js"><link rel="prefetch" href="/assets/Blog.f5765552.js"><link rel="prefetch" href="/assets/highlight.esm.d982e650.js"><link rel="prefetch" href="/assets/markdown.esm.832a189d.js"><link rel="prefetch" href="/assets/math.esm.a3f84b6f.js"><link rel="prefetch" href="/assets/notes.esm.3c361cb7.js"><link rel="prefetch" href="/assets/reveal.esm.b96f05d8.js"><link rel="prefetch" href="/assets/search.esm.80da4a02.js"><link rel="prefetch" href="/assets/zoom.esm.8514a202.js"><link rel="prefetch" href="/assets/photoswipe.esm.218074cd.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/" class="brand"><img class="logo" src="/logo.svg" alt="HAHG的博客"><!----><span class="site-name hide-in-pad">HAHG的博客</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/" class="nav-link" aria-label="学习笔记"><span class="icon iconfont icon-creative"></span>学习笔记<!----></a></div><div class="nav-item hide-in-mobile"><a href="/%E7%94%9F%E6%B4%BB%E7%AC%94%E8%AE%B0/" class="nav-link" aria-label="生活笔记"><span class="icon iconfont icon-edit"></span>生活笔记<!----></a></div><div class="nav-item hide-in-mobile"><a href="https://vuepress-theme-hope.github.io/v2/zh/" rel="noopener noreferrer" target="_blank" aria-label="关于我" class="nav-link"><span class="icon iconfont icon-light"></span>关于我<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="nav-item hide-in-mobile"><a href="/timeline/" class="nav-link" aria-label="时间轴"><span class="icon iconfont icon-time"></span>时间轴<!----></a></div><div class="nav-item hide-in-mobile"><a href="https://vuepress-theme-hope.github.io/v2/zh/" rel="noopener noreferrer" target="_blank" aria-label="常用链接" class="nav-link"><span class="icon iconfont icon-network"></span>常用链接<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">前端</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">算法</span><span class="arrow right"></span></button><!----></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->三、Spring与AOP</h1><div class="page-info"><span class="author-info" aria-label="作者🖊" data-balloon-pos="down" localizeddate="2022年9月27日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://mrhope.site" target="_blank" rel="noopener noreferrer">hahg</a></span><span property="author" content="hahg"></span></span><!----><span class="date-info" aria-label="写作日期📅" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022年9月27日</span><meta property="datePublished" content="2022-09-27T14:47:05.000Z"></span><!----><!----><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down" localizeddate="2022年9月27日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 35 分钟</span><meta property="timeRequired" content="PT35M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-1-aop-的引入" class="router-link-active router-link-exact-active toc-link level2">3.1 AOP 的引入</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-2-aop-概述" class="router-link-active router-link-exact-active toc-link level2">3.2 AOP 概述</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-2-1-aop-简介" class="router-link-active router-link-exact-active toc-link level3">3.2.1 AOP 简介</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-2-2-aop-编程术语" class="router-link-active router-link-exact-active toc-link level3">3.2.2 AOP 编程术语</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-2-3-aop-编程环境搭建" class="router-link-active router-link-exact-active toc-link level3">3.2.3 AOP 编程环境搭建</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-3-通知-advice" class="router-link-active router-link-exact-active toc-link level2">3.3 通知 Advice</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-3-1-通知的用法步骤" class="router-link-active router-link-exact-active toc-link level3">3.3.1 通知的用法步骤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-3-2-通知的其他用法" class="router-link-active router-link-exact-active toc-link level3">3.3.2 通知的其他用法</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-4-顾问-advisor" class="router-link-active router-link-exact-active toc-link level2">3.4 顾问 Advisor</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-4-1-名称匹配方法切入点顾问" class="router-link-active router-link-exact-active toc-link level3">3.4.1 名称匹配方法切入点顾问</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-4-2-正则表达式方法切入点顾问" class="router-link-active router-link-exact-active toc-link level3">3.4.2 正则表达式方法切入点顾问</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-4-2-1-正则表达式专题" class="router-link-active router-link-exact-active toc-link level3">3.4.2-1 正则表达式专题</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-5-自动代理生成器" class="router-link-active router-link-exact-active toc-link level2">3.5 自动代理生成器</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-5-1-默认advisor自动代理生成器" class="router-link-active router-link-exact-active toc-link level3">3.5.1 默认advisor自动代理生成器</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-5-2-bean-名称自动代理生成器" class="router-link-active router-link-exact-active toc-link level3">3.5.2 Bean 名称自动代理生成器</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-6-aspectj-对-aop-的实现" class="router-link-active router-link-exact-active toc-link level2">3.6 AspectJ 对 AOP 的实现</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-6-1-aspectj-的通知类型" class="router-link-active router-link-exact-active toc-link level3">3.6.1 AspectJ 的通知类型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-6-2-aspectj-的开发环境" class="router-link-active router-link-exact-active toc-link level3">3.6.2 AspectJ 的开发环境</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-6-3-aspectj基于注解" class="router-link-active router-link-exact-active toc-link level3">3.6.3 AspectJ基于注解</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%90%8E%E7%AB%AF/SSM%E6%A1%86%E6%9E%B6/Spring4/%E4%B8%89%E3%80%81Spring%E4%B8%8EAOP.html#_3-6-4-aspectj-基于xml" class="router-link-active router-link-exact-active toc-link level3">3.6.4 AspectJ 基于XML</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="三、spring与aop" tabindex="-1"><a class="header-anchor" href="#三、spring与aop" aria-hidden="true">#</a> 三、Spring与AOP</h1><h2 id="_3-1-aop-的引入" tabindex="-1"><a class="header-anchor" href="#_3-1-aop-的引入" aria-hidden="true">#</a> 3.1 AOP 的引入</h2><p>现在有个业务类，其实现了 IService 接口，里面有两个主业务逻辑方法和两个交叉业务逻辑。</p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/aop引入1.png" style="zoom:60%;"><hr><p>此时提出一个问题：若有其它实现类同样也要调用这些事务、日志等处理方法怎么办？</p><ol><li>可以将业务逻辑作为父类，需要使用事务、日志的实现类就继承它即可。</li><li>将这些交叉业务逻辑代码放到专门的工具类或处理类中设置成静态方法，由主业务逻辑调用。</li></ol><p>而这两种的缺点分别是：</p><ol><li>因为 Java 是单继承，若实现类还需要继承其它类，就不行了，其唯一的机会被使用了。</li><li>交叉业务与主业务 <strong>深度耦合</strong> 在一起。当交叉业务逻辑较多时，在主业务代码中会出现大量的交叉业务逻辑代码调用语句，大大 <u>影响了主业务逻辑的可读性，降低了代码的可维护性</u>，同时也增加了开发难度。</li></ol><p><strong>所以，可以采用动态代理方式。动态代理是 OCP 开发原则的一个重要体现：在不修改主业务逻辑的前提下，扩展和增强其功能。</strong></p><hr><p>**定义测试类：**创建代理类来代理目标对象，而其第三个参数需要传递一个对象，这个对象需要实现 InvocationHandler 接口。</p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/aop引入2.png" style="zoom:67%;"><p>**定义切面类：**定义一个切面类实现 InvocationHandler 接口，用于增强所需功能</p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/aop引入3.png" style="zoom:67%;"><p>**观察目标类：**发现目标的主业务逻辑看不到任何交叉的业务逻辑，可读性强便于开发。</p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/aop引入4.png" style="zoom:67%;"><h2 id="_3-2-aop-概述" tabindex="-1"><a class="header-anchor" href="#_3-2-aop-概述" aria-hidden="true">#</a> 3.2 AOP 概述</h2><h3 id="_3-2-1-aop-简介" tabindex="-1"><a class="header-anchor" href="#_3-2-1-aop-简介" aria-hidden="true">#</a> 3.2.1 AOP 简介</h3><p>AOP（Aspect Orient Programming），面向切面编程，<span style="color:red;">是面向对象编程 OOP 的一种补充。</span></p><p>面向对象编程是从 <strong>静态</strong> 角度考虑程序的结构，而面向切面编程是从 <strong>动态</strong> 角度考虑程序运行过程。</p><p>AOP 底层，就是采用动态代理模式实现的。采用了两种代理：</p><ul><li>JDK 的动态代理</li><li>CGLIB 的动态代理</li></ul><p>面向切面编程，就是将交叉业务逻辑封装成切面，利用 AOP 容器的功能将切面 <strong>织入</strong> 到主业务逻辑中。</p><p>所谓交叉业务逻辑是指，通用的、与主业务逻辑无关的代码，如安全检查、 事务、日志等。 若不使用 AOP，则会出现代码纠缠，即 <u>交叉业务逻辑与主业务逻辑混合在一起</u>。</p><p>例如，转账，在真正转账业务逻辑前后，需要权限控制、日志记录、加载事务、结束事务等交叉业务逻辑，而这些业务逻辑与主业务逻辑间并无直接关系。但它们的代码量<u>所占比重能达到总代码量的一半甚至还多</u>。</p><p>它们的存在，不仅产生了大量的 “ 冗余 ” 代码，还<span style="color:red;">大大干扰了主业务逻辑---转账。</span></p><h3 id="_3-2-2-aop-编程术语" tabindex="-1"><a class="header-anchor" href="#_3-2-2-aop-编程术语" aria-hidden="true">#</a> 3.2.2 AOP 编程术语</h3><h4 id="_1-切面-aspect" tabindex="-1"><a class="header-anchor" href="#_1-切面-aspect" aria-hidden="true">#</a> （1）切面（Aspect）</h4><p><strong>切面泛指交叉业务逻辑</strong>。上例中的事务处理、日志处理就可以理解为切面。常用的切面有 <strong>通知</strong> 与 <strong>顾问</strong> 。实际就是对主业务逻辑的一种增强。</p><h4 id="_2-织入-weaving" tabindex="-1"><a class="header-anchor" href="#_2-织入-weaving" aria-hidden="true">#</a> （2）织入（Weaving）</h4><p>织入是指将切面代码插入到目标对象的过程。上例中 MyInvocationHandler 类中的 invoke() 方法完成的工作，就可以称为织入。</p><h4 id="_3-连接点-joinpoint" tabindex="-1"><a class="header-anchor" href="#_3-连接点-joinpoint" aria-hidden="true">#</a> （3）连接点（JoinPoint）</h4><p>连接点指 <strong>可以</strong> 被切面织入的方法。<strong>通常业务接口中的方法均为连接点</strong>。</p><h4 id="_4-切入点-pointcut" tabindex="-1"><a class="header-anchor" href="#_4-切入点-pointcut" aria-hidden="true">#</a> （4）切入点（Pointcut）</h4><p>切入点指切面 <strong>具体</strong> 织入的方法。在 StudentServiceImpl 类中，若 doSome() 将被增强，而 doOther()不被增强，则 doSome()为切入点，而 doOther()仅为连接点。 <u>被 final 修饰的方法是不能作为连接点与切入点的。因为最终的是不能被修改的，不能被增强的</u>。</p><h4 id="_5-目标对象-target" tabindex="-1"><a class="header-anchor" href="#_5-目标对象-target" aria-hidden="true">#</a> （5）目标对象（Target）</h4><p>目标对象指<strong>将要被增强的对象</strong>，即包含主业务逻辑的类的对象。上例中的 StudentServiceImpl 的对象若被增强，则该类称为目标类，该类对象称为目标对象。当然， 不被增强，也就无所谓目标不目标了。</p><h4 id="_6-通知-advice" tabindex="-1"><a class="header-anchor" href="#_6-通知-advice" aria-hidden="true">#</a> （6）通知（Advice）</h4><p>通知是切面的一种实现，可以完成简单织入功能（织入功能就是在这里完成的）。上例中的 MyInvocationHandler 就可以理解为是一种通知。换个角度来说，通知 <strong>定义了增强代码切入到目标代码的时间</strong>点，是目标方法执行之前执行，还是之后执行等。通知类型不同，切入时间不同。</p><p>切入点定义切入的位置，通知定义切入的时间。但不能指定切入点。</p><h4 id="_7-顾问-advisor" tabindex="-1"><a class="header-anchor" href="#_7-顾问-advisor" aria-hidden="true">#</a> （7）顾问（Advisor）</h4><p>顾问是切面的另一种实现，能够将通知以 <strong>更为复杂的方式织入到目标对象中</strong>，是将通知包装为更复杂切面的装配器。可以指定切入点。</p><h3 id="_3-2-3-aop-编程环境搭建" tabindex="-1"><a class="header-anchor" href="#_3-2-3-aop-编程环境搭建" aria-hidden="true">#</a> 3.2.3 AOP 编程环境搭建</h3><h4 id="_1-导入-jar-包" tabindex="-1"><a class="header-anchor" href="#_1-导入-jar-包" aria-hidden="true">#</a> （1）导入 Jar 包</h4><p>在原有 Spring 基本 Jar 包的基础上再导入两个 Jar 包：</p><ul><li>AOP 是由 AOP 联盟提出的一种编程思想，提出的一套编程规范。</li><li>而 Spring 是 AOP 这套规范的一种实现。</li></ul><p>所以，需要导入 AOP 联盟的规范（接口）包及 Spring 对其的实现包。</p><p>AOP 下载地址：[ https://mvnrepository.com/artifact/aopalliance/aopalliance/1.0 ]</p><h4 id="_2-使用原-beans-的约束" tabindex="-1"><a class="header-anchor" href="#_2-使用原-beans-的约束" aria-hidden="true">#</a> （2）使用原 beans 的约束</h4><p>配置文件的文件头，还使用原来的基础头部就可以，即只包含 beans 约束的文件头部即可。</p><h2 id="_3-3-通知-advice" tabindex="-1"><a class="header-anchor" href="#_3-3-通知-advice" aria-hidden="true">#</a> 3.3 通知 Advice</h2><p>通知（Advice），切面的一种实现，可以完成简单织入功能。</p><p>常用通知有：前置通知、后置通知、环绕通知、异常处理通知。</p><h3 id="_3-3-1-通知的用法步骤" tabindex="-1"><a class="header-anchor" href="#_3-3-1-通知的用法步骤" aria-hidden="true">#</a> 3.3.1 通知的用法步骤</h3><p>对于通知的定义、配置与使用，主要分为以下几步：</p><h4 id="_1-定义目标类" tabindex="-1"><a class="header-anchor" href="#_1-定义目标类" aria-hidden="true">#</a> （1）定义目标类</h4><p>定义目标类，就是定义之前的普通 Bean 类，也就是即将被增强的 Bean 类。</p><h4 id="_2-定义通知类" tabindex="-1"><a class="header-anchor" href="#_2-定义通知类" aria-hidden="true">#</a> （2）定义通知类</h4><p>通知类是指，实现了 <strong>相应通知类型接口</strong> 的类。</p><p>实现了这些接口，就要实现这些接口中的方法，而这些方法的执行，则是根据不同类型的通知，其执行时机不同。有四个执行时机：</p><p>A、前置通知：在目标方法执行之前执行</p><p>**MyMethodBeforeAdvice.java：**使用前置通知，需要实现 MethodBeforeAdvice 接口的 before 方法。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//前置通知</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyMethodBeforeAdvice</span> <span class="token keyword">implements</span> <span class="token class-name">MethodBeforeAdvice</span> <span class="token punctuation">{</span>

	<span class="token comment">// 当前方法在目标方法执行之前执行</span>
	<span class="token comment">// method：目标方法</span>
	<span class="token comment">// args：目标方法的参数列表</span>
	<span class="token comment">// target：目标对象</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> <span class="token class-name">Object</span> target<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
		<span class="token comment">// 对于目标方法的增强代码就应该写在这里</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行前置通知方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>B、后置通知：在目标方法执行之后执行</p><p>MyAfterReturningAdvice.java：使用后置通知，需要实现 AfterReturningAdvice 接口的 afterReturning 方法。</p><p>其中方法的形参 returnValue ，可以获取到每个方法的返回值，<span style="color:red;">但无法修改目标方法的返回值。</span></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//后置通知：可以获取到目标方法的返回结果，但无法改变目标方法的结果</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAfterReturningAdvice</span> <span class="token keyword">implements</span> <span class="token class-name">AfterReturningAdvice</span> <span class="token punctuation">{</span>

	<span class="token comment">// 在目标方法执行之后执行</span>
	<span class="token comment">// returnValue：目标方法的返回值</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterReturning</span><span class="token punctuation">(</span><span class="token class-name">Object</span> returnValue<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> <span class="token class-name">Object</span> target<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行后置通知方法  returnValue = &quot;</span> <span class="token operator">+</span> returnValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>C、环绕通知：在目标方法执行之前与之后均执行</p><p>定义环绕通知，需要实现 MethodInterceptor 接口的 invoke 方法，<span style="color:red;">可以改变目标方法的返回值</span>，也可以改变程序执行流程。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//环绕通知：可以修改目标方法的返回结果</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyMethodInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">MethodInterceptor</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">MethodInvocation</span> invocation<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行环绕通知：目标方法执行之前&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 执行目标方法</span>
		<span class="token class-name">Object</span> result <span class="token operator">=</span> invocation<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行环绕通知：目标方法执行之后&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>result <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>result<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> result<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>D、异常处理通知：在目标方法执行过程中，若发生指定异常，则执行通知中的方法</p><p>定义异常通知，需要实现 ThrowsAdvice 接口。</p><p>该接口的主要作用是，在目标方法抛出异常后，根据异常的不同做出相应的处理。当该 <strong>接口处理完异常</strong> 后，会简单地将异常再次抛出给目标方法。</p><p>不过，这个接口较为特殊，从形式上看，该接口中没有必须要实现的方法。</p><p>但这个接口却确实有必须要实现的方法 afterThrowing()。这个方法重载了四种形式。如下图所示。</p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/异常通知源码.png" style="zoom:80%;"><p>由于使用时，一 般只使用其中一种，若要都定义到接口中，则势必要使程序员在使用时 <strong>必须要实现这四个方法</strong>，而 <strong>其他三个都需要空实现</strong>，这是很麻烦的。所以就将该接口定义为了 <strong>标识接口</strong>（没有方法的接口）。</p><h4 id="_3-定义xml文件" tabindex="-1"><a class="header-anchor" href="#_3-定义xml文件" aria-hidden="true">#</a> （3）定义Xml文件</h4><h5 id="a、定义目标对象" tabindex="-1"><a class="header-anchor" href="#a、定义目标对象" aria-hidden="true">#</a> A、定义目标对象</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

	<span class="token comment">&lt;!-- 注册目标对象 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>someService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hahg.aop01.SomeServiceImpl<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="b、定义切面对象" tabindex="-1"><a class="header-anchor" href="#b、定义切面对象" aria-hidden="true">#</a> B、定义切面对象</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- 注册切面：通知 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myBeforeAdvice<span class="token punctuation">&quot;</span></span>
		<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hahg.aop01.MyMethodBeforeAdvice<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAfterAdvice<span class="token punctuation">&quot;</span></span>
		<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hahg.aop01.MyAfterReturningAdvice<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myMethodInterceptor<span class="token punctuation">&quot;</span></span>
		<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hahg.aop01.MyMethodInterceptor<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myThrowsAdvice<span class="token punctuation">&quot;</span></span>
		<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hahg.aop01.MyThrowsAdvice<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="c、生成代理对象" tabindex="-1"><a class="header-anchor" href="#c、生成代理对象" aria-hidden="true">#</a> C、生成代理对象</h5><table><thead><tr><th>属性的key</th><th>属性的value</th><th>使用的标签属性</th></tr></thead><tbody><tr><td>target</td><td>目标对象</td><td>ref</td></tr><tr><td>targetName</td><td>目标对象的名字</td><td>value</td></tr><tr><td></td><td>target 和 targetName 选其一即可</td><td></td></tr><tr><td>interceptorNames</td><td>切面对象的名字，若有多个可使用逗号隔开</td><td>value</td></tr><tr><td></td><td>也可以在property标签内使用集合标签</td><td>array-value</td></tr></tbody></table><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- 生成代理对象 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>serviceProxy<span class="token punctuation">&quot;</span></span>
		<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.aop.framework.ProxyFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- &lt;property name=&quot;targetName&quot; value=&quot;someService&quot;/&gt; --&gt;</span>
		<span class="token comment">&lt;!-- 指定目标对象 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>target<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>someService<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token comment">&lt;!-- 指定切面 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>interceptorNames<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>array</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>myBeforeAdvice<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span> 
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>myAfterAdvice<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span> 
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>myMethodInterceptor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span> 
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>myThrowsAdvice<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span> 
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>array</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-定义测试类" tabindex="-1"><a class="header-anchor" href="#_4-定义测试类" aria-hidden="true">#</a> （4）定义测试类</h4><p>**MyTest.java：**在测试类中获取代理对象，并让其执行相对应的功能。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyTest</span> <span class="token punctuation">{</span>
	
	<span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 创建容器对象，加载Spring配置文件</span>
		<span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;com/hahg/aop01/applicationContext.xml&quot;</span><span class="token punctuation">;</span>
		<span class="token class-name">ApplicationContext</span> ac <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">ISomeService</span> service <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ISomeService</span><span class="token punctuation">)</span> ac<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;serviceProxy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		service<span class="token punctuation">.</span><span class="token function">doFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;==================&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		service<span class="token punctuation">.</span><span class="token function">doSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>	
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果如下：</p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/通知运行结果.png" style="zoom:80%;"><h4 id="_5-异常通知的扩展" tabindex="-1"><a class="header-anchor" href="#_5-异常通知的扩展" aria-hidden="true">#</a> （5）异常通知的扩展</h4><p>异常通知常用的形式如下： public void afterThrowing ( 自定义的异常类 e )</p><p>这里的参数 e 为：与具体业务相关的 <strong>用户自定义</strong> 的异常类对象。</p><p>容器会根据异常类型的不同，自动选择不同的该方法执行。这些方法的执行是在目标方法执行结束后执行的。</p><p>需求：实现用户身份验证。当用户名不正确时，抛出用户名有误异常；当密码不正确时， 抛出密码有误异常。在抛出这些异常后，都要做一些其它处理。</p><h5 id="a、异常的分类" tabindex="-1"><a class="header-anchor" href="#a、异常的分类" aria-hidden="true">#</a> A、异常的分类</h5><p>异常分为两种：</p><ul><li>RuntimeException 运行时异常，不进行处理也可通过编译。</li><li>其他 Exception 编译时异常，受查异常（Checked Exception），若不进行处理无法通过编译。</li></ul><h5 id="b、-定义异常类的父类" tabindex="-1"><a class="header-anchor" href="#b、-定义异常类的父类" aria-hidden="true">#</a> B、 定义异常类的父类</h5><p><strong>UserException.java：</strong> 该类为自定义异常，继承自 Exception 父类，本例只需要使用到参数为 message 的构造器。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserException</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

	<span class="token keyword">public</span> <span class="token class-name">UserException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">UserException</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="c、定义两个异常类的子类" tabindex="-1"><a class="header-anchor" href="#c、定义两个异常类的子类" aria-hidden="true">#</a> C、定义两个异常类的子类</h5><p><strong>PasswordException.java：</strong> 该类继承父类用户异常 UserException ，用于指示密码错误。用户名错误定义也如此。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PasswordException</span> <span class="token keyword">extends</span> <span class="token class-name">UserException</span> <span class="token punctuation">{</span>

	<span class="token keyword">public</span> <span class="token class-name">PasswordException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// TODO Auto-generated constructor stub</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token class-name">PasswordException</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// TODO Auto-generated constructor stub</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="d、定义业务接口" tabindex="-1"><a class="header-anchor" href="#d、定义业务接口" aria-hidden="true">#</a> D、定义业务接口</h5><p>在接口中也需要指明需要抛出的异常。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ISomeService</span> <span class="token punctuation">{</span>
	<span class="token keyword">void</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> user<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UserException</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="e、定义目标类" tabindex="-1"><a class="header-anchor" href="#e、定义目标类" aria-hidden="true">#</a> E、定义目标类</h5><p>在目标类中，定义方法，在方法中判断用户名和密码，再根据不同情况抛出不同异常。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//目标类</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SomeServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">ISomeService</span> <span class="token punctuation">{</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> user<span class="token punctuation">,</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UserException</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token string">&quot;zhang&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UsernameException</span><span class="token punctuation">(</span><span class="token string">&quot;用户名错误&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token string">&quot;111&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">PasswordException</span><span class="token punctuation">(</span><span class="token string">&quot;密码错误&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="f、定义xml文件" tabindex="-1"><a class="header-anchor" href="#f、定义xml文件" aria-hidden="true">#</a> F、定义Xml文件</h5><p>在上面的 Xml 文件的基础上，只保留异常通知。</p><h5 id="g、定义测试类" tabindex="-1"><a class="header-anchor" href="#g、定义测试类" aria-hidden="true">#</a> G、定义测试类</h5><p>在测试类中，调用相关方法并查看结果。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UserException</span> <span class="token punctuation">{</span>
		<span class="token comment">// 创建容器对象，加载Spring配置文件</span>
		<span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;com/hahg/aop02/applicationContext.xml&quot;</span><span class="token punctuation">;</span>
		<span class="token class-name">ApplicationContext</span> ac <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">ISomeService</span> service <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ISomeService</span><span class="token punctuation">)</span> ac<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;serviceProxy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		service<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token string">&quot;zhang&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;112&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="h、查看结果" tabindex="-1"><a class="header-anchor" href="#h、查看结果" aria-hidden="true">#</a> H、查看结果</h5><p>由下图可知，因为使用了 throws 来抛出异常，系统感知到了错误，所以就有 <strong>红条</strong> 出现。</p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/异常运行结果1.png" style="zoom:80%;"><p>若使用 try-catch 块来处理异常，则系统不会感知到错误，异常由 catch 块里面的代码来处理，所以就是 <strong>绿条</strong>。</p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/异常运行结果2.png" style="zoom:80%;"><h3 id="_3-3-2-通知的其他用法" tabindex="-1"><a class="header-anchor" href="#_3-3-2-通知的其他用法" aria-hidden="true">#</a> 3.3.2 通知的其他用法</h3><h4 id="_1-无接口的-cglib-代理生成" tabindex="-1"><a class="header-anchor" href="#_1-无接口的-cglib-代理生成" aria-hidden="true">#</a> （1）无接口的 CGLIB 代理生成</h4><p>若不存在接口，则 ProxyFactoryBean 会自动采用 CGLIB 方式生成动态代理。</p><p>查看后台运行情况，可以看到代理生成使用的是 CGLIB 代理机制。</p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/无接口cgilb.png" style="zoom:80%;"><h4 id="_2-有接口的-cglib-代理生成" tabindex="-1"><a class="header-anchor" href="#_2-有接口的-cglib-代理生成" aria-hidden="true">#</a> （2）有接口的 CGLIB 代理生成</h4><p>proxyTargetClass 属性若存在接口，但又需要使用 CGLIB 生成代理对象，此时，只需要在配置文件中增加一个 proxyTargetClass 属性设置，用于指定强制使用 CGLIB 代理机制。也可指定 optimize（优化）的值为 true，强制使用 CGLIB 代理机制。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- 生成代理对象 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>serviceProxy<span class="token punctuation">&quot;</span></span>
		<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.aop.framework.ProxyFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>targetName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>someService<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token comment">&lt;!-- 指定目标对象 --&gt;</span>
		<span class="token comment">&lt;!-- &lt;property name=&quot;target&quot; ref=&quot;someService&quot; /&gt; --&gt;</span>
		<span class="token comment">&lt;!-- 指定切面 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>interceptorNames<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>array</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>myAfterAdvice<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>array</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- 添加的属性 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>proxyTargetClass<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
		<span class="token comment">&lt;!-- &lt;property name=&quot;optimize&quot; value=&quot;true&quot;/&gt; --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果如下：</p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/有接口cglib1.png" style="zoom:80%;"><h2 id="_3-4-顾问-advisor" tabindex="-1"><a class="header-anchor" href="#_3-4-顾问-advisor" aria-hidden="true">#</a> 3.4 顾问 Advisor</h2><p>通知（Advice）是 Spring 提供的一种切面（Aspect）。</p><p>但其功能过于简单：只能将切面织 入到目标类的所有目标方法中，无法完成将切面织入到 <strong>指定目标方法</strong> 中。</p><p>顾问（Advisor）是 Spring 提供的 <strong>另一种切面</strong>。其可以 <u>完成更为复杂的切面织入功能</u>。</p><p>PointcutAdvisor 是顾问的一种，可以指定具体的切入点。顾问将通知进行了包装，会根据不 同的通知类型，在不同的时间点，将切面织入到不同的切入点。</p><p>PointcutAdvisor 接口有两个较为常用的实现类：</p><ul><li>NameMatchMethodPointcutAdvisor 名称匹配方法切入点顾问 ；</li><li>RegexpMethodPointcutAdvisor 正则表达式匹配方法切入点顾问</li></ul><h3 id="_3-4-1-名称匹配方法切入点顾问" tabindex="-1"><a class="header-anchor" href="#_3-4-1-名称匹配方法切入点顾问" aria-hidden="true">#</a> 3.4.1 名称匹配方法切入点顾问</h3><p>NameMatchMethodPointcutAdvisor，即名称匹配方法切入点顾问。容器可根据配置文件中 <strong>指定的方法名</strong> 来设置切入点。</p><p>代码不用修改，只在配置文件中注册一个顾问，然后使用通知属性 advice 与切入点的方法名 mappedName 对其进行配置。在代理中的切面设置，使用这个顾问即可。</p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/顾问配置1.png" style="zoom:80%;"><p>对于切入点的指定，有多种方式：</p><ul><li>完整方法名</li><li>利用 * 号表示零个或多个字符，来指定一类方法</li></ul><h3 id="_3-4-2-正则表达式方法切入点顾问" tabindex="-1"><a class="header-anchor" href="#_3-4-2-正则表达式方法切入点顾问" aria-hidden="true">#</a> 3.4.2 正则表达式方法切入点顾问</h3><p>RegexpMethodPointcutAdvisor，即正则表达式方法顾问。</p><p>容器可根据 <strong>正则表达式</strong> 来设置切入点。注意，与正则表达式进行匹配的对象是接口中的方法名，而非目标类（接口的实现类）的方法名。</p><p>而这里的方法名为 <strong>全限定性方法名</strong>，即前面含有包名。</p><p>假设现在需要将 doFisrt 和 doSecond 添加后置通知。</p><ul><li>若使用 pattern 属性，则只能指定一个 value；但可以使用 “|” 运算符。</li><li>若使用 patterns 属性，则可以使用 &lt;array/&gt; 标签来指定多个表达式。</li></ul><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- 注册切面：顾问 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAdvisor<span class="token punctuation">&quot;</span></span>
		<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.aop.support.RegexpMethodPointcutAdvisor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>advice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAfterAdvice<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token comment">&lt;!-- 第一种方式 &lt;property name=&quot;pattern&quot; value=&quot;.*doSecond|.*First&quot;/&gt; --&gt;</span>
		<span class="token comment">&lt;!-- 第二种方式 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>patterns<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>array</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>.*doSecond<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>.*First<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>array</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-2-1-正则表达式专题" tabindex="-1"><a class="header-anchor" href="#_3-4-2-1-正则表达式专题" aria-hidden="true">#</a> 3.4.2-1 正则表达式专题</h3><h4 id="_1-正则表达式符号" tabindex="-1"><a class="header-anchor" href="#_1-正则表达式符号" aria-hidden="true">#</a> （1）正则表达式符号</h4><h5 id="a、普通字符" tabindex="-1"><a class="header-anchor" href="#a、普通字符" aria-hidden="true">#</a> <span style="color:red;">A、普通字符</span></h5><p>**普通字符包括没有显式指定为元字符的 所有 **可打印和不可打印字符。这包括<u>所有大写和小写字母、所有数字、所有标点符号和一些其他符号</u>。</p><ul><li>【[...]】匹配 [] 里的全部字符 <ul><li><strong>[aeiou]</strong> 匹配字符串 &quot;google runoob taobao&quot; 中所有的 e o u a 字母</li><li><strong>[A-Z]</strong> 表示一个区间，匹配<strong>所有大写字母</strong></li><li><strong>[a-z]</strong> 表示<strong>所有小写字母</strong>。</li><li><strong>[\s\S]</strong> 表示匹配所有。\s 是匹配所有空白符，包括换行，\S 非空白符，不包括换行。</li></ul></li><li>【\w】匹配字母、数字、下划线。等价于 [A-Za-z0-9_]</li></ul><hr><h5 id="b、定位符" tabindex="-1"><a class="header-anchor" href="#b、定位符" aria-hidden="true">#</a> <span style="color:red;">B、定位符</span></h5><p>定位符使您能够将正则表达式固定到行首或行尾。</p><ul><li>【$】 匹配输入字符串结尾的位置；</li><li>【^】 匹配输入字符串开始的位置，如在 “ [] ” 里则表示 <strong>不匹配</strong> “ [] ” 里表达式的集合； <ul><li><strong>[^aeiou]</strong> 匹配字符串 &quot;google runoob taobao&quot; 中除了 e o u a 字母的所有字母。</li></ul></li><li>【\b】匹配一个单词边界，即字与空格间的位置；</li><li>【\B】非单词边界匹配</li></ul><p>示例1：若要匹配一行文本开始处的文本，请在正则表达式的开始使用 <strong>^</strong> 字符。不要将 <strong>^</strong> 的这种用法与中括号表达式内的用法混淆。</p><p>若要匹配一行文本的结束处的文本，请在正则表达式的结束处使用 <strong>$</strong> 字符。</p><p>若要在搜索章节标题时使用定位点，下面的正则表达式匹配一个章节标题，该标题只包含两个尾随数字，并且出现在 <strong>行首</strong>：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/^Chapter [1-9][0-9]{0,1}/
例如：
Chapter 12 is this.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>真正的章节标题不仅出现行的开始处，而且它还是该行中仅有的文本。它既出现在行首又出现在同一行的结尾。下面的表达式能确保指定的匹配 <u>只匹配章节而不匹配交叉引用</u>。</p><p>通过创建只匹配一行文本的开始和结尾的正则表达式，就可做到这一点。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/^Chapter [1-9][0-9]{0,1}$/
例如：
Chapter 12
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>示例2：匹配单词边界稍有不同，但向正则表达式添加了很重要的能力。</p><p>单词边界是 <strong>单词和空格之间的位置</strong>。非单词边界是任何其他位置。</p><p>下面的表达式匹配单词 Chapter 的开头三个字符，因为这三个字符出现在单词边界后面：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/\bCha/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例3：\b 字符的位置是非常重要的。</p><ul><li>如果它位于要匹配的字符串的开始，它在单词的开始处查找匹配项。</li><li>如果它位于字符串的结尾，它在单词的结尾处查找匹配项。</li></ul><p>例如，下面的表达式匹配单词 Chapter 中的字符串 ter，因为它出现在单词边界的前面：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/ter\b/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/正则表达式3.png" style="zoom:70%;"><p>示例4：下面的表达式匹配 Chapter 中的字符串 apt，但不匹配 aptitude 中的字符串 apt：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/\Bapt/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>字符串 apt 出现在单词 Chapter 中的非单词边界处，但出现在单词 aptitude 中的单词边界处。对于 <strong>\B</strong> 非单词边界运算符，位置并不重要，因为匹配不关心究竟是单词的开头还是结尾。</p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/正则表示式4.png" style="zoom:70%;"><hr><h5 id="c、限定符" tabindex="-1"><a class="header-anchor" href="#c、限定符" aria-hidden="true">#</a> <span style="color:red;">C、限定符</span></h5><p>限定符用来指定正则表达式的一个给定组件必须要 <strong>出现多少次</strong> 才能满足匹配。</p><ul><li><p>【*】 匹配前面的子表达式零次或多次，等价于 {0,} ；</p></li><li><p>【+】 匹配前面的子表达式一次或多次，等价于 {1,} ；</p></li><li><p>【.】 匹配除换行符 \n 和 \r 之外的任何单字符；相等于 [^\n\r]</p></li><li><p>【?】 匹配前面的子表达零次或一次，或指明一个非贪婪限定符</p></li><li><p>【{n}】，n是一个非负整数，匹配确定的n次；</p></li><li><p>【{n,}】，n是一个非负整数，至少匹配n次；</p></li><li><p>【{n.m}】，m和n均为非负整数，其中n&lt;=m，最少匹配n次且最多匹配m次</p></li></ul><p>注意：* 和 + 限定符都是贪婪的，因为它们会尽可能多的匹配文字，只有在它们的后面加上一个 ? 就可以实现非贪婪或最小匹配</p><p>举例1：匹配1~99的两位数：/[1-9][0-9]?/，注：【/……/】 表示该式子为正则表达式</p><ul><li><p>[0-9]?：代表 0 ~ 9 出现零次或者一次，出现一次时作为个位数；</p></li><li><p>[1~9]：代表 1 ~ 9 一定出现一次，在上面的式子出现一次时作为十位数，出现零次时，作为个位数。</p></li></ul><p>举例2：您可能搜索 HTML 文档，以查找在 <strong>h1</strong> 标签内的内容。HTML 代码如下：</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>RUNOOB-菜鸟教程<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>**贪婪：**下面的表达式匹配从开始小于符号 (&lt;) 到最后的大于符号 (&gt;) 之间的所有内容。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/&lt;.*&gt;/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/正则表达式1.png" style="zoom:60%;"><div class="custom-container tip"><p class="custom-container-title">提示</p><p>正则表达式运行工具：[ http://c.runoob.com/front-end/854 ]</p></div><p>**非贪婪：**如果您只需要匹配开始和结束 h1 标签，下面的非贪婪表达式只匹配 &lt;h1&gt;。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/&lt;.*?&gt;/
/&lt;\w+?&gt;/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/正则表达式2.png" style="zoom:60%;"><p>注意：**不能将 <strong>限定符</strong> 与 <strong>定位符</strong> 一起使用。由于在紧靠换行或者单词边界的前面或后面不能有一个以上位置，因此不允许诸如 <strong>^*</strong> 之类的表达式。</p><hr><h5 id="d、特殊字符" tabindex="-1"><a class="header-anchor" href="#d、特殊字符" aria-hidden="true">#</a> <span style="color:red;">D、特殊字符</span></h5><p>所谓特殊字符，就是一些有特殊含义的字符</p><p>如上面说的 runoo*b 中的 *，简单的说就是表示任何字符串的意思。如果要查找字符串中的 ***** 符号，则需要对 ***** 进行转义，即在其前加一个 \，runo\*ob 匹配字符串 &quot; runo*ob &quot;。</p><p>许多元字符要求在试图匹配它们时特别对待。若要匹配这些特殊字符，必须首先使字符 &quot; 转义 &quot;，即将反斜杠字符 &quot; \ &quot;放在它们前面。下表列出了正则表达式中的特殊字符：</p><table><thead><tr><th style="text-align:left;">特别字符</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;">( )</td><td style="text-align:left;">标记一个 <strong>子表达式</strong> 的开始和结束位置。子表达式可以获取供以后使用。</td></tr><tr><td style="text-align:left;">[</td><td style="text-align:left;">标记一个中括号表达式的开始。</td></tr><tr><td style="text-align:left;">?</td><td style="text-align:left;">匹配前面的子表达式零次或一次，或指明一个非贪婪限定符。</td></tr><tr><td style="text-align:left;">\</td><td style="text-align:left;">将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。<br>例如， &#39;n&#39; 匹配字符 &#39;n&#39;。&#39;\n&#39; 匹配换行符。序列 &#39;\&#39; 匹配 &quot;&quot;，而 &#39;(&#39; 则匹配 &quot;(&quot;。</td></tr><tr><td style="text-align:left;">{</td><td style="text-align:left;">标记 <strong>限定符表达式</strong> 的开始。</td></tr><tr><td style="text-align:left;">|</td><td style="text-align:left;">指明两项之间的一个选择。</td></tr></tbody></table><h4 id="_2-正则表达式的断言" tabindex="-1"><a class="header-anchor" href="#_2-正则表达式的断言" aria-hidden="true">#</a> （2）正则表达式的断言</h4><p>正则表达式的先行断言和后行断言一共有 4 种形式：</p><ul><li><strong>(?=pattern)</strong> 零宽正向先行断言(zero-width positive lookahead assertion)</li><li><strong>(?!pattern)</strong> 零宽负向先行断言(zero-width negative lookahead assertion)</li><li><strong>(?&lt;=pattern)</strong> 零宽正向后行断言(zero-width positive lookbehind assertion)</li><li><strong>(?&lt;!pattern)</strong> 零宽负向后行断言(zero-width negative lookbehind assertion)</li></ul><p>这里面的 <strong>pattern</strong> 是一个正则表达式。</p><p>如同 <strong>^</strong> 代表开头，<strong>$</strong> 代表结尾，<strong>\b</strong> 代表单词边界一样，先行断言和后行断言也有类似的作用，它们 <strong>只匹配某些位置</strong>，在匹配过程中，不占用字符，所以被称为**&quot;零宽&quot;**。</p><p>所谓位置，是指：</p><ul><li>字符串中（每行）第一个字符的左边、</li><li>最后一个字符的右边</li><li>以及相邻字符的中间（假设文字方向是头左尾右）。</li></ul><h5 id="a、-pattern-正向先行断言" tabindex="-1"><a class="header-anchor" href="#a、-pattern-正向先行断言" aria-hidden="true">#</a> A、(?=pattern) 正向先行断言</h5><p>代表字符串中的一个 <span style="color:red;">位置</span> ，紧接该位置 <span style="color:red;">之后</span> 的字符序列能够匹配 pattern。</p><p>例如对 <strong>&quot;a regular expression&quot;</strong> 这个字符串，要想匹配 regular 中的 re，但不能匹配 expression 中的 re。</p><p>可以用 <strong>re(?=gular)</strong>，该表达式限定了 re 右边的位置，这个位置之后的字符串是 &quot; gular “ ，但并不消耗 gular 这些字符。</p><p>将表达式改为 <strong>re(?=gular).</strong>，将会匹配 reg，元字符 <strong>.</strong> 匹配了一个字符 <strong>g</strong>，括号匹配了 <strong>e</strong> 和 <strong>g</strong> 之间的位置。</p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/正则表达式5.png" style="zoom:80%;"><h5 id="b、-pattern-负向先行断言" tabindex="-1"><a class="header-anchor" href="#b、-pattern-负向先行断言" aria-hidden="true">#</a> B、(?!pattern) 负向先行断言</h5><p>代表字符串中的一个位置，紧接该位置之后的字符序列 <span style="color:red;">不能</span> 匹配 pattern。</p><p>例如对 <strong>&quot; regex represents regular expression &quot;</strong> 这个字符串，要想匹配除 regex 和 regular 之外的 re。</p><p>可以发现这两个单词的 &quot; re ” 后面都有字符 “ g ”，所以可以用 <strong>re(?!g)</strong>，该表达式限定了 <strong>re</strong> 右边的位置，这个位置后面不是字符 <strong>g</strong>。</p><p><span style="color:red;"> 负向和正向的区别，就在于该位置之后的字符能否匹配括号中的表达式。</span></p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/正则表达式6.png" style="zoom:80%;"><h5 id="c、-pattern-正向后行断言" tabindex="-1"><a class="header-anchor" href="#c、-pattern-正向后行断言" aria-hidden="true">#</a> C、(?&lt;=pattern) 正向后行断言</h5><p>代表字符串中的一个 <span style="color:red;">位置</span>，紧接该位置 <span style="color:red;">之前</span> 的字符序列能够匹配 pattern。</p><p>例如对 <strong>regex represents regular expression</strong> 这个字符串，有 4 个单词，要想匹配单词内部的 re，但不匹配单词开头的 re。</p><p>观察规律可知，想要匹配单词的内部 &quot; re &quot;，前面必须为单词字符，所以可以用 <strong>(?&lt;=\w)re</strong> 。在本例中，也指在单词内部的 re ，即 re 前面有非单词边界，所以也可以用 <strong>\Bre</strong> 来匹配。</p><p>之所以叫后行断言，是因为正则表达式引擎在匹配字符串和表达式时，是从前向后逐个扫描字符串中的字符，并判断是否与表达式符合，当在表达式中遇到该断言时，正则表达式引擎 <u>需要往字符串前端检测已扫描过的字符，相对于扫描方向是向后的</u>。</p><p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/正则表达式7.png" alt=""></p><h5 id="d、-pattern-负向后行断言" tabindex="-1"><a class="header-anchor" href="#d、-pattern-负向后行断言" aria-hidden="true">#</a> D、(?&lt;!pattern) 负向后行断言</h5><p>代表字符串中的一个位置，紧接该位置之前的字符序列不能匹配 pattern。</p><p>例如对 <strong>&quot; regex represents regular expression &quot;</strong> 这个字符串，要想匹配单词开头的 re，可以用 <strong>(?&lt;!\w)re</strong>。单词开头的 <strong>re</strong>，在本例中，也就是指不在单词内部的 <strong>re</strong>，即 <strong>re</strong> 前面不是单词字符。当然也可以用 <strong>\bre</strong> 来匹配。</p><h2 id="_3-5-自动代理生成器" tabindex="-1"><a class="header-anchor" href="#_3-5-自动代理生成器" aria-hidden="true">#</a> 3.5 自动代理生成器</h2><p>前面代码中所使用的代理对象，均是由 ProxyFactoryBean 代理工具类生成的。而该代理工具类存在着如下缺点：</p><ol><li>一个代理对象只能代理一个 Bean，即如果有两个 Bean 同时都要织入同一个切面，这时不仅要配置这两个 Bean，即两个目标对象，同时还要配置两个代理对象。</li></ol><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/代理工具类问题1.png" style="zoom:70%;"><ol start="2"><li>在客户类中获取 Bean 时，使用的是 <strong>代理类</strong> 的 id，而非我们定义的目标对象 Bean 的 id。 我们真正想要执行的应该是目标对象。从形式上看，不符合正常的逻辑。</li></ol><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/代理工具类问题2.png" style="zoom:70%;"><hr><p>Spring 提供了自动代理生成器，用于解决 ProxyFactoryBean 的问题。常用的自动代理生成器有两个：</p><ul><li>默认 advisor 自动代理生成器</li><li>Bean 名称自动代理生成器</li></ul><p>需要注意的是，自动代理生成器均继承自 Bean 后处理器 BeanPostProcessor。</p><p>容器中所有 Bean 在初始化时均会自动执行 Bean 后处理器中的方法，在本例就会执行代理功能，故其无需 id 属性。所以自动代理生成器的 Bean 也没有 id 属性，客户类直接使用目标对象 bean 的 id。</p><h3 id="_3-5-1-默认advisor自动代理生成器" tabindex="-1"><a class="header-anchor" href="#_3-5-1-默认advisor自动代理生成器" aria-hidden="true">#</a> 3.5.1 默认advisor自动代理生成器</h3><p>自动代理生成器 DefaultAdvisorAutoProxyCreator 代理的生成方式是，将所有的目标对象与 Advisor 自动结合，生成代理对象。无需给生成器做任何的注入配置。</p><p>注意，只能与 Advisor 配合使用。 这种代理的配置很简单，如下：</p><h4 id="_1-修改xml文件" tabindex="-1"><a class="header-anchor" href="#_1-修改xml文件" aria-hidden="true">#</a> （1）修改Xml文件</h4><p>很明显，原本一大串的代码就变成了一行代码，如果添加多个目标对象就 <u>不用再为它们手动注册代理</u> 了。解决了上述的第一个问题。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>someService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hahg.aop05.SomeServiceImpl<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>someService2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hahg.aop05.SomeServiceImpl<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAfterAdvice<span class="token punctuation">&quot;</span></span>
		<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hahg.aop04.MyAfterReturningAdvice<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAdvisor<span class="token punctuation">&quot;</span></span>
		<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.aop.support.RegexpMethodPointcutAdvisor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>advice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAfterAdvice<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pattern<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.*First<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

	<span class="token comment">&lt;!-- 注册自动代理生成器 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span>
		<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-修改测试类" tabindex="-1"><a class="header-anchor" href="#_2-修改测试类" aria-hidden="true">#</a> （2）修改测试类</h4><p>在测试类中，直接获取目标对象即可，解决了上述的第二个问题。</p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/默认自动代理生成器.png" style="zoom:70%;"><h4 id="_3-其拥有的缺点" tabindex="-1"><a class="header-anchor" href="#_3-其拥有的缺点" aria-hidden="true">#</a> （3）其拥有的缺点</h4><ol><li>不能选择目标对象，其每个目标对象都会被增强；</li><li>不能选择切面类型，切面只能是顾问 advisor，不能是通知 advice；</li><li>不能选择 advisor，所以 advisor 均将被作为切面织入到目标方法。</li></ol><h3 id="_3-5-2-bean-名称自动代理生成器" tabindex="-1"><a class="header-anchor" href="#_3-5-2-bean-名称自动代理生成器" aria-hidden="true">#</a> 3.5.2 Bean 名称自动代理生成器</h3><p>DefaultAdvisorAutoProxyCreator 会为每一个目标对象织入所有匹配的 Advisor，<u>不具有选择性，且切面只能是顾问 Advisor</u>。</p><p>而 BeanNameAutoProxyCreator 的代理生成方式是，根据 bean 的 id，来为符合相应名称的类生成相应代理对象，且切面既可以是顾问 Advisor 又可以是通知 Advice。</p><p>注意，只需要修改配置文件中的代理生成配置，及测试类中的通过 getBean()获取的 bean 的 id 为目标类 beanId 即可。</p><h4 id="_1-修改xml文件-1" tabindex="-1"><a class="header-anchor" href="#_1-修改xml文件-1" aria-hidden="true">#</a> （1）修改Xml文件</h4><p>首先修改自动代理生成器的类名，其用到的属性名为</p><ul><li>beanNames，其属性值为所增强的目标对象</li><li>interceptorNames，其属性值为所织入的切面对象，可以是通知也可以是顾问。</li><li>该例为 someService 对象织入后置通知。</li></ul><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>someService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hahg.aop06.SomeServiceImpl<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>someService2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hahg.aop06.SomeServiceImpl<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAfterAdvice<span class="token punctuation">&quot;</span></span>
		<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hahg.aop04.MyAfterReturningAdvice<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span>
	<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beanNames<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>someService<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>interceptorNames<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAfterAdvice<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后，再为 someService2 织入顾问，指定 doFirst 的方法后面添加后置通知。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAdvisor<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.aop.support.RegexpMethodPointcutAdvisor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>advice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAfterAdvice<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pattern<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.*First<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span>
	<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beanNames<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>someService2<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>interceptorNames<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAdvisor<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-查看测试结果" tabindex="-1"><a class="header-anchor" href="#_2-查看测试结果" aria-hidden="true">#</a> （2）查看测试结果</h4><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/bean自动代理执行结果.png" style="zoom:80%;"><h4 id="_3-解决的问题" tabindex="-1"><a class="header-anchor" href="#_3-解决的问题" aria-hidden="true">#</a> （3）解决的问题</h4><table><thead><tr><th>默认advisor自动代理生成器</th><th>Bean名称自动代理生成器</th></tr></thead><tbody><tr><td>不能选择目标对象，其每个目标对象都会被增强</td><td>可以使用 beanNames 属性来指定目标对象</td></tr><tr><td>不能选择切面类型</td><td>可以选择通知和顾问进行增强</td></tr><tr><td>不能选择 advisor</td><td>可以使用 interceptorNames 属性来指定 advisor</td></tr></tbody></table><h2 id="_3-6-aspectj-对-aop-的实现" tabindex="-1"><a class="header-anchor" href="#_3-6-aspectj-对-aop-的实现" aria-hidden="true">#</a> 3.6 AspectJ 对 AOP 的实现</h2><p>对于 AOP 这种编程思想，很多框架都进行了实现。Spring 就是其中之一，可以完成面向切面编程。</p><p>然而，AspectJ 也实现了 AOP 的功能，且其实现方式更为简捷，使用更为方便， 而且还支持注解式开发。</p><p>所以，Spring 又将 AspectJ 的对于 AOP 的实现也引入到了自己的框架中。 在 Spring 中使用 AOP 开发时，一般使用 AspectJ 的实现方式。</p><h3 id="_3-6-1-aspectj-的通知类型" tabindex="-1"><a class="header-anchor" href="#_3-6-1-aspectj-的通知类型" aria-hidden="true">#</a> 3.6.1 AspectJ 的通知类型</h3><p>AspectJ 中常用的通知有五种类型：</p><ol><li>前置通知</li><li>后置通知</li><li>环绕通知</li><li>异常通知</li><li><span style="color:red;">最终通知 </span></li></ol><p>其中最终通知是指，无论程序执行是否正常，该通知都会执行。类似于 try..catch 中的 finally 代码块。</p><p>AspectJ 除了提供了六种通知外，还定义了专门的表达式用于指定切入点。表达式的原型是：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>execution ( [modifiers-pattern] 访问权限类型 
ret-type-pattern 返回值类型 
[declaring-type-pattern] 全限定性类名 
name-pattern(param-pattern) 方法名(参数名) 
[throws-pattern] 抛出异常类型 )
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其中第 2 行的 ret-type-pattern 和第 4 行 name-pattern(param-pattern) 是必须要的。</p><p>其所使用的符号，注意与正则表达式不太一样。</p><table><thead><tr><th>符号</th><th>意义</th></tr></thead><tbody><tr><td>*</td><td>零个至多个任意符号</td></tr><tr><td>..</td><td>在 <strong>方法参数</strong> 中，表示任意多个参数<br>用在 <strong>包名</strong> 后，表示当前包以及子包路径</td></tr><tr><td>+</td><td>用在接口后，表示当前接口以及实现类<br>用在类名后，表示当前类以及子类</td></tr></tbody></table><p>* 符号的示例：</p><table><thead><tr><th>表达式</th><th>意义</th></tr></thead><tbody><tr><td><strong>(public * *(..))</strong></td><td>任意公共方法</td></tr><tr><td><strong>(* set*(..))</strong></td><td>任何一个命名以 “ set ” 开始的方法。</td></tr></tbody></table><p>.. 符号的示例：</p><table><thead><tr><th>表达式</th><th>意义</th></tr></thead><tbody><tr><td><strong>(* com.xyz.service.*.*(..))</strong></td><td>定义在 service 包里的任意类的任意方法</td></tr><tr><td><strong>(* com.xyz.service..*.*(..))</strong></td><td>定义在 service 包或者子包里的任意类的任意方法</td></tr><tr><td><strong>(* *.service.*.doSome())</strong></td><td>指定只有 <strong>一级包</strong> 下的 serivce 子包下所有类中的 doSome()方法为切入</td></tr><tr><td><strong>(* *..service.*.doSome())</strong></td><td>指定所有包下的 serivce 子包下所有类中的 doSome()方法为切入点</td></tr></tbody></table><p>+ 符号的使用：</p><table><thead><tr><th>表达式</th><th>意义</th></tr></thead><tbody><tr><td><strong>(* com.xyz.service.IAccountService.*(..))</strong></td><td>IAccountService 接口中的任意方法</td></tr><tr><td><strong>(* com.xyz.service.IAccountService+.*(..))</strong></td><td>IAccountService 若为接口，则为接口中的<br>任意方法及其所有实现类中的任意方法；<br>若为类，则为该类及其子类中的任意方法</td></tr></tbody></table><h3 id="_3-6-2-aspectj-的开发环境" tabindex="-1"><a class="header-anchor" href="#_3-6-2-aspectj-的开发环境" aria-hidden="true">#</a> 3.6.2 AspectJ 的开发环境</h3><h4 id="_1-所需jar包" tabindex="-1"><a class="header-anchor" href="#_1-所需jar包" aria-hidden="true">#</a> （1）所需Jar包</h4><p>在之前的基础上导入两个 Jar 包：</p><ul><li>aspectjweaver-1.8.10.jar</li><li>spring-aspects-4.3.6.RELEASE.jar</li></ul><h4 id="_2-所需约束" tabindex="-1"><a class="header-anchor" href="#_2-所需约束" aria-hidden="true">#</a> （2）所需约束</h4><p>引入帮助文档的 AOP 约束即可。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>aop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/aop<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop 
        http://www.springframework.org/schema/aop/spring-aop.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-6-3-aspectj基于注解" tabindex="-1"><a class="header-anchor" href="#_3-6-3-aspectj基于注解" aria-hidden="true">#</a> 3.6.3 AspectJ基于注解</h3><p>基于注解的 AOP 实现 AspectJ 提供了以注解方式对于 AOP 的实现。</p><h4 id="_1-定义业务接口以及其实现类" tabindex="-1"><a class="header-anchor" href="#_1-定义业务接口以及其实现类" aria-hidden="true">#</a> （1）定义业务接口以及其实现类</h4><p><strong>ISomeService.java</strong>：在接口定义三个方法，第二个返回值为 String，其余的为 void。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ISomeService</span> <span class="token punctuation">{</span>
	<span class="token comment">// 目标方法1</span>
	<span class="token keyword">void</span> <span class="token function">doFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 目标方法2</span>
	<span class="token class-name">String</span> <span class="token function">doSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 目标方法3</span>
	<span class="token keyword">void</span> <span class="token function">doThird</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>SomeServiceImpl.java</strong>：在实现类中，第二个方法返回小写字母—— ” abcde &quot; ，第三个方法预备一个异常来实验异常通知。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//目标类</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SomeServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">ISomeService</span><span class="token punctuation">{</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行doFirst()方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">doSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行doSecond()方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token string">&quot;abcde&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doThird</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">/* System.out.println(&quot;执行doThird()方法&quot; + 3/0); */</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行doThird()方法&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-定义xml文件" tabindex="-1"><a class="header-anchor" href="#_2-定义xml文件" aria-hidden="true">#</a> （2）定义Xml文件</h4><p>在Xml文件中，注册切面和目标对象，再进行配置自动代理即可。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- 注册切面 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAspect<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hahg.aop07.MyAspect<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- 定义目标对象 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>someService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.hahg.aop07.SomeServiceImpl<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!-- 配置aspect根据注解自动代理 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspectj-autoproxy</span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-定义切面类" tabindex="-1"><a class="header-anchor" href="#_3-定义切面类" aria-hidden="true">#</a> （3）定义切面类</h4><h5 id="a、前置通知-before" tabindex="-1"><a class="header-anchor" href="#a、前置通知-before" aria-hidden="true">#</a> A、前置通知-@Before</h5><p>为第一个方法织入前置通知，在前置通知的方法的参数中可以使用 JoinPoint 对象，其 <strong>可以输出切入点信息</strong>。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>	<span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* *..ISomeService.doFirst(..))&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myBefore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行前置通知&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* *..ISomeService.doFirst(..))&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myBefore</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> jp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行前置通知，jp&quot;</span> <span class="token operator">+</span> jp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果如下：</p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/注解前置运行结果2.png" style="zoom:80%;"><p>当然也可以使用 JoinPoint 对象的相关方法，例如 getSignature() 方法，以下是其方法运行结果。</p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/注解前置通知运行结果.png" style="zoom:80%;"><h5 id="b、后置通知-afterreturning" tabindex="-1"><a class="header-anchor" href="#b、后置通知-afterreturning" aria-hidden="true">#</a> B、后置通知-@AfterReturning</h5><p>为第二个方法织入后置通知，在后置通知的方法的参数中可以 <strong>获取到被织入方法的返回值</strong>，<strong>不过需要在注解的 returing 属性中指定返回值的变量名</strong>。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>	<span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* *..ISomeService.doSecond(..))&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myAfterReturning</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行后置通知&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* *..ISomeService.doSecond(..))&quot;</span><span class="token punctuation">,</span> returning <span class="token operator">=</span> <span class="token string">&quot;result&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myAfterReturning</span><span class="token punctuation">(</span><span class="token class-name">Object</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行后置通知，result=&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果如下：</p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/注解后置运行结果.png" style="zoom:80%;"><h5 id="c、环绕通知-around" tabindex="-1"><a class="header-anchor" href="#c、环绕通知-around" aria-hidden="true">#</a> C、环绕通知-@Around</h5><p>为第二个方法织入环绕通知，在环绕通知的方法的参数中<strong>有 ProceedingJoinPoint 变量，其可以使用 proceed 方法来让方法执行</strong>。</p><p>这里需要将 proceed 方法的返回值作为一个变量，再将这个变量作为 myAround 方法的返回值。</p><p>在方法中，可以增强原先方法的返回值，例如下面的例子就是将返回值增强为大写。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>	<span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* *..ISomeService.doSecond(..))&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">myAround</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> proceedingJoinPoint<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行环绕通知之前&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Object</span> result <span class="token operator">=</span> proceedingJoinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行环绕通知之后&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> result<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> result<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果如下：由后置通知输出的结果可知，增强已成功实现。</p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/注解环绕运行结果.png" style="zoom:80%;"><h5 id="d、异常通知-afterthrowing" tabindex="-1"><a class="header-anchor" href="#d、异常通知-afterthrowing" aria-hidden="true">#</a> D、异常通知-@AfterThrowing</h5><p>为第三个方法织入异常通知。在异常通知的方法的参数中<strong>有自定义异常变量，其可以用来输出对应的提示语句</strong>，需要在注解的 throwing 属性中指定异常变量的变量名。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>	<span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* *..ISomeService.doThird(..))&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myAfterThrowing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行异常通知&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* *..ISomeService.doThird(..))&quot;</span><span class="token punctuation">,</span> throwing <span class="token operator">=</span> <span class="token string">&quot;ex&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myAfterThrowing</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行异常通知，异常ex=&quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="e、最终通知-after" tabindex="-1"><a class="header-anchor" href="#e、最终通知-after" aria-hidden="true">#</a> E、最终通知-@After</h5><p>无论目标方法是否抛出异常，该增强均会被执行。</p><p>下图为正常的运行结果：</p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/注解最终运行结果.png" style="zoom:80%;"><p>下图为出现异常的运行结果：最终通知依旧执行。</p><p><img src="https://raw.githubusercontent.com/hahg2000/SSMPic/main/注解异常运行结果.png" alt=""></p><h5 id="f、定义切入点-pointcut" tabindex="-1"><a class="header-anchor" href="#f、定义切入点-pointcut" aria-hidden="true">#</a> F、定义切入点-@Pointcut</h5><p>在本例中，当<u>较多的通知增强方法使用同一个切入点时需要复制多次表达式</u>，编写、维护均较为麻烦。</p><p>AspectJ 提供了@Pointcut 注解，用于定义 execution 切入点表达式。</p><p>其用法是，将@Pointcut 注解在一个方法之上，以后所有的 executeion 的 value 属性值 均可使用该方法名作为切入点。代表的就是@Pointcut 定义的切入点。这个使用@Pointcute 注解的方法一般使用 private 的标识方法，即没有实际作用的方法。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>	<span class="token comment">//定义切入点</span>
	<span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;execution(* *..ISomeService.doThird(..))&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">mypointcut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
	
	<span class="token annotation punctuation">@After</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;mypointcut()&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">myAfter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;执行最终通知&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-6-4-aspectj-基于xml" tabindex="-1"><a class="header-anchor" href="#_3-6-4-aspectj-基于xml" aria-hidden="true">#</a> 3.6.4 AspectJ 基于XML</h3><p>AspectJ 除了提供了基于注解的 AOP 的实现外，还提供了以 XML 方式的实现。</p><p>切面就是一个普通对象类，而用于增强的方法就是普通的方法。通过配置文件，将切面中的功能增强织入到了目标类的目标方法中。</p><h4 id="_1-修改切面类" tabindex="-1"><a class="header-anchor" href="#_1-修改切面类" aria-hidden="true">#</a> （1）修改切面类</h4><p>将所有的注解删除即可。</p><h4 id="_2-修改xml文件" tabindex="-1"><a class="header-anchor" href="#_2-修改xml文件" aria-hidden="true">#</a> （2）修改Xml文件</h4><p>在Xml文件中，需要利用标签配置 Aop。</p><h5 id="a、-aop-config-标签" tabindex="-1"><a class="header-anchor" href="#a、-aop-config-标签" aria-hidden="true">#</a> A、&lt;aop:config/&gt;标签</h5><p>该标签为配置 Aop 的第一级标签</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
    
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="b、-aop-pointcut-标签" tabindex="-1"><a class="header-anchor" href="#b、-aop-pointcut-标签" aria-hidden="true">#</a> B、&lt;aop:pointcut/&gt;标签</h5><p>标签的 expression 属性对应注解的 value 属性；id 属性对应空方法的方法名。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--
  定义切入点
  @Pointcut(value = &quot;execution(* *..ISomeService.doThird(..))&quot;)
  private void mypointcut() {} 
 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* *..ISomeService.doFirst(..))<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mydoFirstPointcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* *..ISomeService.doSecond(..))<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mydoSecondPointcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* *..ISomeService.doThird(..))<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mydoThirdPointcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="c、-aop-aspect-标签" tabindex="-1"><a class="header-anchor" href="#c、-aop-aspect-标签" aria-hidden="true">#</a> C、&lt;aop:aspect/&gt;标签</h5><p>该标签将切面类引入，以便于之后选择切入类型以及所织入的方法。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>	<span class="token comment">&lt;!-- @Aspect --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspect</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAspect<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>aspect</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="d、-aop-before-标签" tabindex="-1"><a class="header-anchor" href="#d、-aop-before-标签" aria-hidden="true">#</a> D、&lt;aop:before/&gt;标签</h5><p>该标签的属性 pointcut-ref 可以指定切入点；若有两个相同名字的方法，默认选择无参数方法，如果要选择有参数的方法，需要加上该参数的完整类名。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- 
  前置通知
  @Before(value = &quot;mydoFirstPointcut()&quot;) 
  public void myBefore() 
  public void myBefore(JoinPoint jp)
 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myBefore<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mydoFirstPointcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myBefore(org.aspectj.lang.JoinPoint)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mydoFirstPointcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="e、-aop-after-returning-标签" tabindex="-1"><a class="header-anchor" href="#e、-aop-after-returning-标签" aria-hidden="true">#</a> E、&lt;aop:after-returning/&gt;标签</h5><p>该标签的属性 returning 可以指定返回值的变量名。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- 
    后置通知
    @AfterReturning(value = &quot;execution(* *..ISomeService.doSecond(..))&quot;)
    public void myAfterReturning()
    @AfterReturning(value = &quot;execution(* *..ISomeService.doSecond(..))&quot;, returning = &quot;result&quot;)
    public void myAfterReturning(Object result) 
--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-returning</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAfterReturning<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mydoSecondPointcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-returning</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAfterReturning(java.lang.Object)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mydoSecondPointcut<span class="token punctuation">&quot;</span></span> <span class="token attr-name">returning</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>result<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="f、-aop-around-标签" tabindex="-1"><a class="header-anchor" href="#f、-aop-around-标签" aria-hidden="true">#</a> F、&lt;aop:around/&gt;标签</h5><p>因为环绕通知的方法必须携带 ProceedingJoinPoint 类型的参数，否则 <strong>将无法执行目标方法</strong>。所以在该标签的 method 属性中填写方法名，<strong>无需填写变量名</strong>。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- 
    环绕通知
    @Around(value = &quot;execution(* *..ISomeService.doSecond(..))&quot;)
    public Object myAround(ProceedingJoinPoint proceedingJoinPoint) throws Throwable 
--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>around</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAround<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mydoSecondPointcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="g、-aop-after-throwing-标签" tabindex="-1"><a class="header-anchor" href="#g、-aop-after-throwing-标签" aria-hidden="true">#</a> G、&lt;aop:after-throwing/&gt;标签</h5><p>在该标签中可以使用 throwing 属性来指定异常的变量名。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--
    异常通知
    @AfterThrowing(value = &quot;execution(* *..ISomeService.doThird(..))&quot;)
    public void myAfterThrowing() 
    @AfterThrowing(value = &quot;execution(* *..ISomeService.doThird(..))&quot;, throwing = &quot;ex&quot;)
    public void myAfterThrowing(Exception ex) 
--&gt;</span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-throwing</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAfterThrowing<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mydoThirdPointcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after-throwing</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAfterThrowing(java.lang.Exception)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">throwing</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ex<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mydoThirdPointcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="h、-aop-after-标签" tabindex="-1"><a class="header-anchor" href="#h、-aop-after-标签" aria-hidden="true">#</a> H、&lt;aop:after/&gt;标签</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- 
    最终通知
    @After(value = &quot;mypointcut()&quot;)
    public void myAfter() 
--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myAfter<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mydoThirdPointcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/demo/src/学习笔记/后端/SSM框架/Spring4/三、Spring与AOP.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><span class="info">2022/9/27 14:47:05</span></div><div class="meta-item contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: 61403802+hahg2000@users.noreply.github.com">hahg2000</span><!--]--><!--]--></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">默认页脚</div><div class="copyright">Copyright © 2022 hahg</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.b534db7f.js" defer></script>
  </body>
</html>
